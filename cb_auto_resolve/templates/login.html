<!doctype html>
<html lang="en">

<head>
	<link rel="stylesheet" type="text/css" href="{{ url_for('static',filename='css/login.css') }}">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
</head>

<body style="background: rgb(255, 255, 255);">
	<div id="custom-bg" style="opacity: 0;"></div>
	<div id="lwz1">
		<div class id="lga">
			<div style="margin-top:115px;height:92px;width:500px">
			</div>
		</div>
		<div class="sfbg nojsv" style="margin-top:-60px">
			<div class="sfbgg">
			</div>
		</div>
		<form class="form-container">
			<div class="form-title">
				<h2>Redshift(gscoprod) Login</h2>
			</div>
			<div class="form-title">Username</div>
			<input class="form-field" type="text" id="username" /><br />
			<div class="form-title">Password</div>
			<input class="form-field" type="password" id="password" /><br />
			<div class="submit-container">
				<a href="#" class="submit-button" id="theButton">
					<i class="fa fa-refresh fa-1x" id="lock-refresh"></i> Submit</a>

				<script type="text/javascript">
					$('#theButton').click(function() {
						$('#lock-refresh').addClass('fa-spin');
						doWork();
					});

					function doWork() {
						// ajax the JSON to the server
						if (document.getElementById('username').value == '' || document.getElementById('password').value == '') {
							$('#lock-refresh').removeClass('fa-spin');
							alert("Please Fill in Username/Password");
							return 200;
						}
						$.post("/login", {
								username: document.getElementById('username').value,
								password: document.getElementById('password').value
							}).done(function() {
								$('#lock-refresh').removeClass('fa-spin');
								alert("Connection Succeed");
								window.location.href = "http://127.0.0.1:5000/search";
							})
							.fail(function() {
								$('#lock-refresh').removeClass('fa-spin');
								alert("Wrong Username/Password. Try again.");
							});
						// stop link reloading the page
						event.preventDefault();
					}
				</script>

			</div>


		</form>

</body>

</html>
